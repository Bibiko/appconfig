[DEFAULT]
domain = ${name}.test.clld.org
error_email = lingweb@shh.mpg.de
with_blog = False

workers = 3
deploy_duration = 1

app_pkg = -e git+https://github.com/clld/${name}.git#egg=${name}
sqlalchemy_url = postgresql://${name}@/${name}

home_dir = /home/${name}
www_dir = ${home_dir}/www

config = ${home_dir}/config.ini

venv_dir = /usr/venvs/${name}
venv_bin = ${venv_dir}/bin
src_dir = ${venv_dir}/src/${name}
download_dir = ${src_dir}/static/download

alembic = ${venv_bin}/alembic
gunicorn = ${venv_bin}/gunicorn_paster

log_dir = /var/log/${name}
access_log = ${log_dir}/access.log
error_log = ${log_dir}/error.log

logrotate = /etc/logrotate.d/${name}

supervisor = /etc/supervisor/conf.d/${name}.conf

nginx_default_site = /etc/nginx/sites-available/default
nginx_site = /etc/nginx/sites-enabled/${name}
nginx_location = /etc/nginx/locations.d/${name}.conf
nginx_htpasswd = /etc/nginx/htpasswd/${name}.htpasswd

require_deb =
  screen vim mc tree open-vm-tools
  sqlite3
  git curl python-dev python3-dev build-essential libxml2-dev libxslt1-dev
  postgresql postgresql-contrib libpq-dev
  supervisor
  nginx apache2-utils

require_pip =
  psycopg2
  gunicorn

pg_collkey = false
pg_unaccent = false

[_hosts]
testserver = vbox

[testapp]
name = testapp
port = 9999
test = ${_hosts:testserver}
production = ${_hosts:testserver}
