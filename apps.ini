[DEFAULT]
domain = ${name}.clld.org
error_email = lingweb@shh.mpg.de
with_blog = False

workers = 3
deploy_duration = 1

sqlalchemy_url = postgresql://${name}@/${name}
app_pkg = -e git+git://github.com/clld/${name}.git#egg=${name}

home = /home/${name}
config = ${home}/config.ini
www = ${home}/www

venv = /usr/venvs/${name}
venv_bin = ${venv}/bin
gunicorn = ${venv_bin}/gunicorn_paster
src = ${venv}/src/${name}

logs = /var/log/${name}
error_log = ${logs}/${name}
logrotate = /etc/logrotate.d/${name}

supervisor = /etc/supervisor/conf.d/${name}.conf
nginx_site = /etc/nginx/sites-enabled/${name}
nginx_location = /etc/nginx/locations.d/${name}.conf
nginx_htpasswd = /etc/nginx/locations.d/${name}.htpasswd

require_deb =
  libpq-dev
  git
  nginx
  supervisor
  make
  sqlite3
  curl
  libxml2-dev
  libxslt-dev
  python-pip
  apache2-utils

require_pip =
  psycopg2
  gunicorn

pg_collkey = False
pg_unaccent = False

[_hosts]
michael = michael.clld.org          # xenial
uri = uri.clld.org                  # precise
clld2 = vmext24-204.gwdg.de         # precise
steve = steve.clld.org              # precise
matthew = matthew.clld.org          # trusty
harald = harald.clld.org            # precise
christfried = christfried.clld.org  # precise

_vbox = ${precise}
_precise = localhost:2201
_trusty = localhost:2202
_xenial = localhost:2203

[apics]
name = apics
domain = apics-online.info
port = 8886
production = ${_hosts:uri}
test = ${_hosts:harald}

[asjp]
name = asjp
port = 8894
test = ${_hosts:steve}
production = ${_hosts:matthew}

[clldportal]
name = clldportal
domain = portal.clld.org
port = 8895
test = ${_hosts:uri}
production = ${_hosts:christfried}

[cobl]
name = cobl
domain = cobl.info
port = 8909
test = ${_hosts:michael}
production = ${_hosts:michael}

[concepticon]
name = concepticon
port = 8904
test = ${_hosts:matthew}
production = ${_hosts:matthew}

[csd]
name = csd
port = 8902
test = ${_hosts:steve}
production = ${_hosts:matthew}
pg_collkey = True
with_blog = True

[dictionaria]
name = dictionaria
port = 8897
test = ${_hosts:matthew}
production = ${_hosts:christfried}
pg_collkey = True
pg_unaccent = True

[dogonlanguages]
name = dogonlanguages
domain = dogonlanguages.org
port = 8903
test = ${_hosts:matthew}
production = ${_hosts:steve}

[ewave]
name = ewave
domain = ewave-atlas.org
port = 8882
test = ${_hosts:uri}
production = ${_hosts:steve}

[glottolog3]
name = glottolog3
domain = glottolog.org
port = 8881
test = ${_hosts:uri}
production = ${_hosts:harald}
deploy_duration = 2

[grambank]
name = grambank
port = 8905
test = ${_hosts:christfried}
production = ${_hosts:christfried}

[ids]
name = ids
port = 8893
test = ${_hosts:harald}
production = ${_hosts:matthew}
pg_collkey = True

[lexibank]
name = lexibank
port = 8907
test = ${_hosts:christfried}
production = ${_hosts:christfried}
pg_collkey = True

[nts]
name = nts
port = 8900
test = ${_hosts:christfried}
production = ${_hosts:christfried}
with_blog = True

[parabank]
name = parabank
port = 8908
test = ${_hosts:matthew}
production = ${_hosts:matthew}
pg_collkey = True

[phoible]
name = phoible
domain = phoible.org
port = 8890
test = ${_hosts:uri}
production = ${_hosts:steve}

[sails]
name = sails
port = 8898
test = ${_hosts:christfried}
production = ${_hosts:christfried}

[solr]
name = solr
port = 8080
test = ${_hosts:uri}
production = ${_hosts:harald}

[tsammalex]
name = tsammalex
port = 8899
test = ${_hosts:matthew}
production = ${_hosts:christfried}
pg_collkey = True

[tsezacp]
name = tsezacp
port = 8901
test = ${_hosts:uri}
production = ${_hosts:steve}

[valpal]
name = valpal
domain = valpal.info
port = 8892
test = ${_hosts:steve}
production = ${_hosts:clld2}

[waab]
name = waab
domain = afbo.info
port = 8891
test = ${_hosts:harald}
production = ${_hosts:steve}

[wals3]
name = wals3
domain = wals.info
port = 8887
test = ${_hosts:matthew}
production = ${_hosts:harald}
workers = 7
with_blog = True
pg_unaccent = True

[wold2]
name = wold2
domain = wold.clld.org
port = 8888
test = ${_hosts:harald}
production = ${_hosts:uri}
